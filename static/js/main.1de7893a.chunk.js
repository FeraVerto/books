(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{21:function(e,t,a){e.exports={book_list:"BookList_book_list__1nV9O",book_item_link:"BookList_book_item_link__3Q9-z",swing:"BookList_swing__bwsTv",book_item:"BookList_book_item__xREi7",book_item_image:"BookList_book_item_image__1wpy4"}},27:function(e,t,a){e.exports={app:"App_app__1kX79",main:"App_main__3ZkGI",create_position:"App_create_position__367Uh",app_header:"App_app_header__1p2bw"}},28:function(e,t,a){e.exports={form:"CreateBook_form__BMY5F",create_position:"CreateBook_create_position__2u0FQ",button_position:"CreateBook_button_position__2y9sE"}},29:function(e,t,a){e.exports={button_block:"EditFormBook_button_block__1U6uS",button_position:"EditFormBook_button_position__2yhpC"}},32:function(e,t,a){e.exports={input:"Input_input__2aIzs",wrap_input:"Input_wrap_input__3B9f-"}},35:function(e,t,a){e.exports={form:"EditBook_form__2S2dV",create_position:"EditBook_create_position__1fPSr"}},39:function(e,t,a){e.exports={button:"Button_button__x8en0"}},40:function(e,t,a){e.exports={search:"Search_search__2G1KP",button:"Search_button__2Gowd"}},43:function(e,t,a){e.exports={navigation:"Navigaton_navigation__2qfZM"}},49:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var o=a(0),i=a.n(o),n=a(38),c=a.n(n),r=(a(49),a(8)),s=a(26),l=a(5),u=a(2),b=a(27),j=a.n(b),_=a(12),d=a(21),p=a.n(d),h=a(39),m=a.n(h),O=a(1),f=function(e){var t=e.type,a=e.text,o=e.onClick,i=e.className;return Object(O.jsx)("button",{className:"".concat(m.a.button," ").concat(i),type:t,onClick:o,children:a})},x=a(44),v=a(32),k=a.n(v),g=function(e){var t=e.className,a=e.id,o=e.onChange,i=e.value,n=e.type,c=e.name,r=Object(x.a)(e,["className","id","onChange","value","type","name"]);return Object(O.jsx)("div",{className:k.a.wrap_input,children:Object(O.jsx)("input",Object(l.a)({type:n,className:"".concat(k.a.input," ").concat(t),id:a,onChange:o,value:i,name:c},r))})},S=a(40),N=a.n(S),y=a(16),F=function(){for(var e=[],t=0,a=Object.keys(localStorage);t<a.length;t++){var o=a[t],i=localStorage.getItem(o);null!==i&&e.push({id:o,book:JSON.parse(i)})}return e},w=function(e){var t=e.dispatch,a=Object(o.useState)([]),i=Object(r.a)(a,2),n=i[0],c=i[1],s=Object(y.a)({initialValues:{search:""},onSubmit:function(e){t({type:"SET_BOOKS_LIST",payload:n}),t({type:"SEARCH_FILTER",payload:{filter:e.search}})}});return Object(o.useEffect)((function(){c(F())}),[]),Object(O.jsxs)("form",{onSubmit:s.handleSubmit,className:N.a.search,children:[Object(O.jsx)(g,{id:"search",name:"search",onChange:s.handleChange,value:s.values.search,type:"search"}),Object(O.jsx)(f,{text:"Search",type:"submit"})]})},B=function(e){var t=e.state,a=e.dispatch;return Object(o.useEffect)((function(){a({type:"SET_BOOKS_LIST",payload:F()})}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{children:"List of Books"}),Object(O.jsx)(w,{dispatch:a}),Object(O.jsx)("ul",{className:p.a.book_list,children:t.books.map((function(e){return Object(O.jsx)(_.b,{className:p.a.book_item_link,to:"/edit/".concat(e.id),children:Object(O.jsxs)("li",{className:p.a.book_item,children:[Object(O.jsxs)("span",{children:["Author: ",e.book.author?e.book.author:"unknown"]}),Object(O.jsx)("span",{children:e.book.title}),Object(O.jsx)("div",{className:p.a.book_item_image,children:Object(O.jsx)("img",{alt:e.book.title,src:e.book.cover})})]})},e.id)}))})]})},L=a(17),C=a.n(L),E=a(25),I=a(58),R=a(6),T=a.n(R),A=a.p+"static/media/download.3bcaa934.svg",M=a.p+"static/media/nophoto.8ce14280.jpg",P=function(e){var t=e.formik,a=e.title,i=e.author,n=e.cover,c=Object(o.useState)(),u=Object(r.a)(c,2),b=u[0],j=u[1],_=b&&Object(s.a)(b).map((function(e,t){return Object(O.jsx)("img",{className:T.a.image,alt:a,width:200,height:300,src:URL.createObjectURL(e)},t)}));return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("label",{htmlFor:"title",children:[Object(O.jsx)("span",{children:a}),Object(O.jsx)("span",{children:t.errors.title&&t.touched.title?Object(O.jsxs)("div",{className:T.a.error,children:[" - ",t.errors.title]}):null})]}),Object(O.jsx)(g,Object(l.a)({id:"title",type:"text"},t.getFieldProps("title"))),Object(O.jsxs)("label",{htmlFor:"author",children:[Object(O.jsx)("span",{children:i}),Object(O.jsx)("span",{children:t.errors.author&&t.touched.author?Object(O.jsxs)("div",{className:T.a.error,children:[" - ",t.errors.author]}):null})]}),Object(O.jsx)(g,Object(l.a)({id:"author",type:"text"},t.getFieldProps("author"))),Object(O.jsxs)("div",{className:T.a.file_block,children:[Object(O.jsxs)("div",{className:T.a.image_container,children:[Object(O.jsx)("span",{className:T.a.error_image,children:!b&&t.errors.cover&&t.touched.cover?Object(O.jsx)("div",{className:T.a.error,children:t.errors.cover}):null}),_||Object(O.jsx)("img",{className:T.a.image,width:200,height:300,src:n||M,alt:a})]}),Object(O.jsxs)("div",{className:T.a.file_block_wrapper,children:[Object(O.jsxs)("label",{className:T.a.input_file_button,htmlFor:"cover",children:[Object(O.jsx)("span",{className:T.a.input_file_icon_wrapper,children:Object(O.jsx)("img",{className:T.a.input_file_icon,src:A,alt:"Select a file",width:"25"})}),Object(O.jsx)("span",{className:T.a.input_file,children:"Select a file"})]}),Object(O.jsx)(g,{className:T.a.input_image,id:"cover",type:"file",name:"cover",onBlur:t.handleBlur,onChange:function(e){var a=e.target;t.setFieldValue("cover",a.files[0]),a.files&&j(a.files)}})]})]})]})},V=function(e){return new Promise((function(t,a){var o=new FileReader;o.onload=function(){return t(o.result)},o.onerror=function(e){return a(e)},e.type&&e.type.match("image.*")&&o.readAsDataURL(e)}))},U=a(28),q=a.n(U),J=function(){var e=Object(o.useState)(""),t=Object(r.a)(e,2),a=t[0],i=t[1],n=Object(o.useState)(!1),c=Object(r.a)(n,2),s=c[0],b=c[1],j=Object(y.a)({initialValues:{title:"",author:"",cover:{}},onSubmit:function(){var e=Object(E.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t.cover).then((function(e){t=Object(l.a)(Object(l.a)({},t),{},{cover:e})}));case 2:i(JSON.stringify(t)),b(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validate:function(e){var t={};return e.title||(t.title="Required"),e.author||(t.author="Required"),e.cover.name||(t.cover="Required"),t}});return Object(o.useEffect)((function(){var e=Object(I.a)();a&&localStorage.setItem(e,a)}),[a]),s?Object(O.jsx)(u.a,{to:"/"}):Object(O.jsx)("div",{className:q.a.create_position,children:Object(O.jsxs)("form",{className:q.a.form,onSubmit:j.handleSubmit,children:[Object(O.jsx)("h2",{children:"Add a new book"}),Object(O.jsx)(P,{formik:j,title:"Book  title",author:"Author name"}),Object(O.jsx)(f,{className:q.a.button_position,type:"submit",text:"Create"})]})})},z=a(43),G=a.n(z),K=function(){return Object(O.jsxs)("div",{className:G.a.navigation,children:[Object(O.jsx)(_.b,{to:"/",children:"List of books"}),Object(O.jsx)(_.b,{to:"/create",children:"Create book"})]})},Z=a(35),D=a.n(Z),H=a(29),Q=a.n(H),X=function(e){var t=e.title,a=e.author,o=e.id,i=e.setLocalStateUpdate,n=e.deleteBook,c=e.setEditMode,r=e.cover,s=Object(y.a)({initialValues:{title:t,author:a,cover:r},onSubmit:function(){var e=Object(E.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t.cover||!t.cover.startsWith("data:image")){e.next=4;break}t=Object(l.a)(Object(l.a)({},t),{},{cover:t.cover}),e.next=6;break;case 4:return e.next=6,V(t.cover).then((function(e){t=Object(l.a)(Object(l.a)({},t),{},{cover:e})}));case 6:i(JSON.stringify(t)),c(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validate:function(e){var t={};return e.title||(t.title="Required"),e.author||(t.author="Required"),t}});return Object(O.jsxs)("form",{onSubmit:s.handleSubmit,children:[Object(O.jsx)(P,{formik:s,title:"Book title",author:"Author name",cover:r}),Object(O.jsxs)("div",{className:Q.a.button_block,children:[Object(O.jsx)(f,{type:"submit",className:Q.a.button_position,text:"Save"}),Object(O.jsx)(f,{type:"submit",className:Q.a.button_position,text:"Delete",onClick:function(){n(o)}})]})]},o)},W=function(e){var t=e.state,a=e.dispatch,i=Object(u.f)().id,n=Object(o.useState)(""),c=Object(r.a)(n,2),s=c[0],l=c[1],b=Object(o.useState)(""),j=Object(r.a)(b,2),_=j[0],d=j[1],p=Object(o.useState)(!1),h=Object(r.a)(p,2),m=h[0],f=h[1],x=function(e){d(e),f(!0)};return Object(o.useEffect)((function(){s&&localStorage.setItem(i,s),_&&localStorage.removeItem(_)})),m?Object(O.jsx)(u.a,{to:"/"}):Object(O.jsx)("div",{className:D.a.create_position,children:Object(O.jsxs)("div",{className:D.a.form,children:[Object(O.jsx)("h2",{children:"Edit book"}),t.books.map((function(e){return e.id===i&&Object(O.jsx)(X,{setLocalStateUpdate:l,deleteBook:x,editMode:m,setEditMode:f,cover:e.book.cover,id:e.id,title:e.book.title,author:e.book.author,idParam:i,dispatch:a},e.id)}))]})})},Y={books:[]},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS_LIST":return Object(l.a)(Object(l.a)({},e),{},{books:Object(s.a)(t.payload)});case"SEARCH_FILTER":return Object(l.a)(Object(l.a)({},e),{},{books:e.books.filter((function(e){return e.book.title.toLowerCase().includes(t.payload.filter.toLowerCase())||e.book.author.toLowerCase().includes(t.payload.filter.toLowerCase())}))});default:return e}},ee=function(){var e=Object(o.useReducer)($,Y),t=Object(r.a)(e,2),a=t[0],i=t[1];return Object(o.useEffect)((function(){i({type:"SET_BOOKS_LIST",payload:F()})}),[]),Object(O.jsxs)("div",{className:j.a.app,children:[Object(O.jsx)("header",{className:j.a.app_header,children:Object(O.jsx)(K,{})}),Object(O.jsxs)("main",{className:j.a.main,children:[Object(O.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(O.jsx)(B,{state:a,dispatch:i})}}),Object(O.jsx)(u.b,{path:"/create",render:function(){return Object(O.jsx)(J,{})}}),Object(O.jsx)(u.b,{path:"/edit/:id",render:function(){return Object(O.jsx)(W,{state:a,dispatch:i})}})]})]})},te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,59)).then((function(t){var a=t.getCLS,o=t.getFID,i=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),o(e),i(e),n(e),c(e)}))};c.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(_.a,{children:Object(O.jsx)(ee,{})})}),document.getElementById("root")),te()},6:function(e,t,a){e.exports={error:"FormField_error__3LMp2",input_image:"FormField_input_image__17RHA",file_block:"FormField_file_block__2GVML",image:"FormField_image__zZzuv",image_container:"FormField_image_container__2aizC",error_image:"FormField_error_image__3O7Vl",file_block_wrapper:"FormField_file_block_wrapper__nTXAN",input_file_icon:"FormField_input_file_icon__1ERyG",input_file:"FormField_input_file__18JlI",input_file_button:"FormField_input_file_button__3uFZ4"}}},[[56,1,2]]]);
//# sourceMappingURL=main.1de7893a.chunk.js.map